# 技术系统设计: JD-Insight (AI宠物版)

## 第一部分: 黑客马拉松 MVP 版本

### 1.1. 架构原则
MVP 架构遵循黑客马拉松的规则以及设备端 AI 的独特能力。
*   **100% 客户端**: 无后端服务器。
*   **隐私第一**: 所有数据（用户“喂食”的JD）都完全在用户的机器上存储和处理。
*   **情感化设计**: 技术服务于创意，优先实现有趣、吸引人的宠物互动体验。

### 1.2. 技术栈
*   **平台**: Chrome 扩展 (Manifest V3)。
*   **核心逻辑**: JavaScript (ES6 模块)。
*   **AI API**:
    *   `chrome.ai.summarizer`: 用于“消化”JD，生成摘要。
    *   `chrome.ai.prompt`: 用于从JD中“提炼”出结构化的硬技能和软技能，形成“技能宝石”的核心数据。
*   **存储**:
    *   `chrome.storage.local`: 用于存储用户收集的每一颗“技能宝石”的数据。
*   **UI与动画**:
    *   **基础**: HTML, CSS, 和 JavaScript 构建“宠物小屋” (`dashboard.html`) 和交互界面。
    *   **宠物形象**: 使用静态图片 (PNG) 或动态图片 (GIF) 来展示宠物的不同状态。
    *   **动画**: 大量使用 **CSS Animations/Transitions** 来实现流畅的交互效果（如JD飞入、宝石出现），以保持扩展的轻量级。
*   **内容抓取**:
    *   内容脚本 (Content Scripts) 抓取目标网站的JD文本。

### 1.3. 数据流与用户体验
1.  **待机与检测**:
    *   内容脚本在招聘页面注入一个待机的宠物UI。
    *   当检测到JD内容时，宠物进入“饥饿/期待”状态（例如，切换GIF），并显示“喂食”按钮。
2.  **喂食 (提取)**:
    *   用户点击“喂食”。按钮触发CSS动画，JD内容（或一个象征性的食物图标）飞向宠物。
    *   内容脚本抓取JD文本并发送到后台脚本。
3.  **消化 (AI 处理)**:
    *   后台脚本收到文本后，宠物UI进入“消化中”状态（例如，思考的GIF）。
    *   后台并行调用`summarizer`和`prompt` API。
4.  **产出 (存储)**:
    *   AI处理完成后，后台脚本将结果（摘要、技能列表等）组装成一个“技能宝石”JSON对象，存入`chrome.storage.local`。
    *   后台通知内容脚本处理完毕。
5.  **展示宝石**:
    *   内容脚本收到完成通知后，宠物UI恢复待机状态，并在旁边播放一个“出现”动画，展示一枚新的“技能宝石”图标。
    *   用户点击该宝石，可以查看本次分析的详细结果。
6.  **融合 (聚合分析)**:
    *   在“宠物小屋”页面，JS会读取所有存储的“技能宝石”。
    *   页面会展示所有的宝石，并根据所有宝石的数据动态计算、渲染出一个最终的“技能水晶”（聚合后的技能词云或图表）。

---

## 第二部分: 黑客马拉松之后 SOTA 版本

### 2.1. 架构原则
*   **混合架构**: 引入后端，用于支持宠物成长数据的云同步和更高级的AI分析。
*   **数据驱动智能**: 后端（在用户同意下）聚合匿名数据，用于分析更宏观的市场技能趋势。
*   **个性化养成**: 集成用户简历，实现更深度的个性化互动和分析。

### 2.2. 技术栈
*   **前端 (Chrome 扩展)**:
    *   **框架**: 升级到 **React/Vite 和 TypeScript**，使用 **Zustand** 或 **Redux Toolkit** 管理复杂的宠物状态和用户数据。
*   **后端**:
    *   **语言/框架**: **Python 和 FastAPI**。
    *   **数据库**: **PostgreSQL** (存储用户账户、宠物成长状态)、**向量数据库** (用于简历与JD的语义匹配)。
*   **高级AI**:
    *   **服务器端模型 (Gemini 1.5 Pro等)**:
        1.  **简历语义匹配**: 将用户的简历“喂”给宠物，后端进行向量化分析，计算与后续JD的匹配度，产出“匹配度宝石”。
        2.  **AI驱动的建议**: 产出能提供具体简历修改建议的“智慧宝石”。
*   **本地AI (Chrome Built-in AI)**:
    *   **简历与市场匹配度分析 (Resume-to-Market Fit Analysis)**: 即便在SOTA版本，此功能也应优先考虑在客户端实现以保护用户隐私。
        1.  **简历解析**: 在Dashboard页面，使用`chrome.ai` API提取用户粘贴简历中的技能，形成“用户技能集”。
        2.  **对比分析**: 将“用户技能集”与`chrome.storage.local`中所有Gems聚合而成的“市场技能需求”进行对比。
        3.  **可视化**: 通过UI清晰地展示技能的交集、差集，从而生成匹配度报告。

### 2.3. 演进后的数据流 (宠物成长示例)
1.  **用户操作**: 用户登录后，在“宠物小屋”中可以看到自己宠物的等级和经验值。
2.  **喂食与成长**: 每次用户“喂食”一份JD，除了产出“技能宝石”，后端还会根据JD的质量或长度给予宠物一定的经验值。
3.  **升级与解锁**: 当经验值达到阈值，宠物会升级。后端API会返回新的状态，前端UI则根据新状态解锁新的宠物外观、动画或小屋装饰品，为用户提供持续的激励。
